{% extends "layout-gov-reduced.html" %}

{% block pageTitle %}
What date did your patient meet the Special Rules?
{% endblock %}

{% block content %}
<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <form id="sendAnSR1Form" action="/hcp-e2e-journey-mvp01/sr1-form-09" method="post">
            <div class="govuk-form-group">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                        <span class="govuk-caption-l"> Question 7 of 17</span>
                        <h1 class="govuk-fieldset__heading">
                            What date did the patient meet the Special Rules?
                        </h1>
                    </legend>

                    <!-- Date from which the patient is thought to meet the Special Rules -->
                    <p class="govuk-body">
                        This could be the date of diagnosis, the date you complete the form or any date in between. If you do not know the exact date, you can use the first day of the month.
                    </p>
                    <div id="dateofSpecialRules-hint" class="govuk-hint">
                        For example, 27 3 2007.
                    </div>
                    <div class="govuk-date-input" id="dateofSpecialRules">
                        <div class="govuk-date-input__item">
                            <div class="govuk-form-group">
                                <label class="govuk-label govuk-date-input__label" for="dateofSpecialRules-day">
                                    Day
                                </label>
                                <input autocomplete="off"
                                    class="govuk-input govuk-date-input__input govuk-input--width-2"
                                    id="dateofSpecialRules-day" name="dateofSpecialRules-day" type="text"
                                    inputmode="numeric" maxlength="2">
                            </div>
                        </div>
                        <div class="govuk-date-input__item">
                            <div class="govuk-form-group">
                                <label class="govuk-label govuk-date-input__label" for="dateofSpecialRules-month">
                                    Month
                                </label>
                                <input autocomplete="off"
                                    class="govuk-input govuk-date-input__input govuk-input--width-2"
                                    id="dateofSpecialRules-month" name="dateofSpecialRules-month" type="text"
                                    inputmode="numeric" maxlength="2">
                            </div>
                        </div>
                        <div class="govuk-date-input__item">
                            <div class="govuk-form-group">
                                <label class="govuk-label govuk-date-input__label" for="dateofSpecialRules-year">
                                    Year
                                </label>
                                <input autocomplete="off"
                                    class="govuk-input govuk-date-input__input govuk-input--width-4"
                                    id="dateofSpecialRules-year" name="dateofSpecialRules-year" type="text"
                                    inputmode="numeric" maxlength="4">
                            </div>
                        </div>
                    </div>

                </fieldset>
            </div>

            <!-- Submit button -->
            <div class="govuk-button-group">
                <button id="" class="govuk-button" data-module="govuk-button"
                    onclick="saveDateofSpecialRulesSR1Formmvp01()">
                    Save and continue
                </button>
                <a class="govuk-link" onclick="saveAndLeave()" style="color:#1d70b8;" aria-label="Save and return to SR1 form">Save and return to SR1 form</a>
            </div>
        </form>
        <div class="govuk-!-padding-bottom-9"></div>

        <!--Get help bottom-->
        <hr class="govuk-section-break govuk-section-break--visible" aria-hidden="true">
        <section class="govuk-width-container govuk-!-margin-top-7 govuk-!-margin-bottom-7 ">
            <div class="govuk-grid-row">
                <div class="govuk-grid-column-full">
                    <h2 class="govuk-heading-m">Get help</h2>
                    <p class="govuk-body"><a class="govuk-link"
                            href="https://ds1500-prototype.herokuapp.com/sr1-1/sr1-guidance#patients-may-not-know-true-nature-of-illness"
                            target="_blank">How to complete the SR1 form (opens in a new tab)</a></p>
                    <ul class="govuk-list">
                        <li>Email: <a href="mailto:sr1.servicedesk@nhs.net">sr1.servicedesk@nhs.net</a></li>
                        <li>Telephone: 0300 303 5035</li>
                    </ul>
                </div>
            </div>
        </section>

    </div>

    <!-- Side panel
        <div class="govuk-grid-column-one-third">
            <div class="app-step-nav-related app-step-nav-related--singular">
                <h2 class="app-step-nav-related__heading">Get help</h2>
                <p class="govuk-body"><a  class="govuk-link" href="https://ds1500-prototype.herokuapp.com/sr1-1/sr1-guidance#patients-may-not-know-true-nature-of-illness" target="_blank">How to complete the SR1 form (opens in a new tab)</a></p>
                <ul class="govuk-list">
                    <li>Email: <a href="mailto:sr1.servicedesk@nhs.net">sr1.servicedesk@nhs.net</a></li>
                    <li>Telephone: 0300 303 5035</li>
                </ul>
            </div>
        </div> -->
</div>

<script>
    // get and set in this order - this ensures what is sent in query is the same as what is in the localStorage
    const saveAndLeave = () => {
        saveDateofSpecialRulesSR1Formmvp01();

        const origin = window.location.origin;
        const url = getUrlWithSR1DataAsQueryParamsmvp01(origin, "/hcp-e2e-journey-mvp01/task-list-sr1-form");

        window.location.replace(url.toString());
    }
</script>
{% endblock %}